
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://courses.mlops.vn/mlops-crash-course/tong-quan-he-thong/mlops-platform.html" rel="canonical"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.3.1, mkdocs-material-8.4.1" name="generator"/>
<title>MLOps platform - MLOpsVN Courses</title>
<link href="../../assets/stylesheets/main.69437709.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.cbb835fc.min.css" rel="stylesheet"/>
<meta content="#4cae4f" name="theme-color"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../assets/stylesheets/styles.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-JX2MD05JFT"),document.addEventListener("DOMContentLoaded",function(){if(document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document.forms.feedback){var e,a=document.forms.feedback;for(e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}"undefined"!=typeof location$&&location$.subscribe(function(e){n("config","G-JX2MD05JFT",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-JX2MD05JFT",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
<script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
<link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>html.glightbox-open { overflow: initial; height: 100%; }</style><script src="../../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="green" data-md-color-primary="green" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#gioi-thieu">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="MLOpsVN Courses" class="md-header__button md-logo" data-md-component="logo" href="../../index.html" title="MLOpsVN Courses">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            MLOpsVN Courses
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              MLOps platform
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="MLOpsVN Courses" class="md-nav__button md-logo" data-md-component="logo" href="../../index.html" title="MLOpsVN Courses">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    MLOpsVN Courses
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../index.html">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../index.html">MLOps Crash Course</a>
<label for="__nav_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="MLOps Crash Course" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          MLOps Crash Course
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" id="__nav_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1">
          Tổng quan hệ thống
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Tổng quan hệ thống" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_1">
<span class="md-nav__icon md-icon"></span>
          Tổng quan hệ thống
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="tong-quan-mlops.html">
        Tổng quan MLOps
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="phan-tich-van-de.html">
        Phân tích vấn đề
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          MLOps platform
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="mlops-platform.html">
        MLOps platform
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#gioi-thieu">
    Giới thiệu
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#architecture">
    Architecture
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#su-dung-platform">
    Sử dụng platform
  </a>
<nav aria-label="Sử dụng platform" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#start">
    Start
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#stop">
    Stop
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#restart">
    Restart
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cau-truc-code">
    Cấu trúc code
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#infra-layer">
    Infra layer
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tong-ket">
    Tổng kết
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tai-lieu-tham-khao">
    Tài liệu tham khảo
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../poc/xay-dung-poc.html">
        POC
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3">
          Data pipeline
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Data pipeline" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
          Data pipeline
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../data-pipeline/tong-quan-data-pipeline.html">
        Tổng quan pipeline
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../data-pipeline/airflow-co-ban.html">
        Airflow cơ bản
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../data-pipeline/feature-store.html">
        Feature store
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../data-pipeline/xay-dung-data-pipeline.html">
        Xây dựng pipeline
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../training-pipeline/xay-dung-training-pipeline.html">
        Training pipeline
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../model-serving/trien-khai-model-serving.html">
        Model serving
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" id="__nav_2_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6">
          Monitoring
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Monitoring" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_6">
<span class="md-nav__icon md-icon"></span>
          Monitoring
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../monitoring/tong-quan-monitoring.html">
        Tổng quan monitoring
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../monitoring/metrics-he-thong.html">
        Metrics hệ thống
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../monitoring/thiet-ke-monitoring-service.html">
        Thiết kế monitoring service
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../monitoring/trien-khai-monitoring-service.html">
        Triển khai monitoring service
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7" id="__nav_2_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_7">
          CI/CD
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="CI/CD" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_7">
<span class="md-nav__icon md-icon"></span>
          CI/CD
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../ci-cd/gioi-thieu.html">
        Giới thiệu
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ci-cd/kiem-thu-he-thong.html">
        Kiểm thử hệ thống
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ci-cd/jenkins-co-ban.html">
        Jenkins cơ bản
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ci-cd/data-pipeline.html">
        CI/CD cho data pipeline
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ci-cd/model-serving.html">
        CI/CD cho model serving
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tong-ket/tom-tat-noi-dung.html">
        Tổng kết
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../CONTRIBUTING.html">
        Contributing
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../CODE_OF_CONDUCT.html">
        Code of Conduct
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#gioi-thieu">
    Giới thiệu
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#architecture">
    Architecture
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#su-dung-platform">
    Sử dụng platform
  </a>
<nav aria-label="Sử dụng platform" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#start">
    Start
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#stop">
    Stop
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#restart">
    Restart
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cau-truc-code">
    Cấu trúc code
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#infra-layer">
    Infra layer
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tong-ket">
    Tổng kết
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tai-lieu-tham-khao">
    Tài liệu tham khảo
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1>MLOps platform</h1>
<figure>
<a class="glightbox" href="../../assets/images/mlops-crash-course/tong-quan-he-thong/mlops-platform/platform-meme.png"><img loading="lazy" src="../../assets/images/mlops-crash-course/tong-quan-he-thong/mlops-platform/platform-meme.png"/></a>
<figcaption>Photo by <a href="https://coussement-bruno.medium.com/?source=post_page-----69ff5d96b7db--------------------------------">Coussement Bruno</a> on <a href="https://towardsdatascience.com/which-cloud-servicer-provider-ml-platform-do-you-need-69ff5d96b7db">Towards Data Science</a></figcaption>
</figure>
<h2 id="gioi-thieu">Giới thiệu</h2>
<p>MLOps platform là nền tảng cung cấp các công cụ cần thiết để phát triển, quản lý và triển khai các dự án ML. Trong một số tài liệu khác MLOps platform còn có tên là AI platform hoặc ML platform. Ở khóa học này chúng ta sẽ sử dụng một MLOps platform với các thành phần và công cụ tương ứng như sau:</p>
<table>
<thead>
<tr>
<th>Tên thành phần</th>
<th>Ý nghĩa</th>
<th>Tool sử dụng</th>
</tr>
</thead>
<tbody>
<tr>
<td>Source control</td>
<td>Quản lý các phiên bản về mã nguồn và dữ liệu</td>
<td>Git &amp; Github</td>
</tr>
<tr>
<td>Feature store</td>
<td>Lưu trữ, quản lý và tương tác với các tính năng (feature)</td>
<td>Feast (PostgreSQL &amp; Redis backend)</td>
</tr>
<tr>
<td>Experiment tracking</td>
<td>Lưu trữ thông tin và quản lý các thí nghiệm (experiments)</td>
<td>MLFlow</td>
</tr>
<tr>
<td>Model registry</td>
<td>Lưu trữ và quản lý các mô hình</td>
<td>MLFlow</td>
</tr>
<tr>
<td>ML metadata Store</td>
<td>Lưu trữ thông tin (artifact) của các luồng (pipeline)</td>
<td>MLFlow</td>
</tr>
<tr>
<td>Workflow orchestrator</td>
<td>Xây dựng và quản lý các luồng quy trình</td>
<td>Airflow</td>
</tr>
<tr>
<td>Monitoring</td>
<td>Theo dõi tài nguyên hệ thống, hiệu năng của mô hình và chất lượng dữ liệu trên production</td>
<td>Prometheus &amp; Grafana &amp; ELK</td>
</tr>
<tr>
<td>CI/CD</td>
<td>Tự động hóa quá trình test và deploy</td>
<td>Jenkins</td>
</tr>
</tbody>
</table>
<details class="info" open="open">
<summary>Info</summary>
<p>Chúng ta có thể sử dụng một công cụ cho nhiều mục đích khác nhau, ví dụ MLFlow, với mục đích sử dụng tối thiểu các công cụ cần thiết mà vẫn đảm bảo được <strong>9 MLOps Principles</strong>, <strong>9 MLOps Components</strong> và <strong>5 MLOps Workflows</strong> được áp dụng (xem lại bài <a href="../tong-quan-mlops">Tổng quan MLOps</a>). Việc sử dụng quá nhiều công cụ có thể dẫn tới việc vận hành MLOps platform trở nên phức tạp, đồng thời khiến người dùng dễ bị choáng ngợp do không biết sử dụng và quản lý một cách hiệu quả.</p>
</details>
<h2 id="architecture">Architecture</h2>
<p>Kiến trúc MLOps platform của chúng ta sẽ như sau:</p>
<p><a class="glightbox" href="../../assets/images/mlops-crash-course/tong-quan-he-thong/mlops-platform/architecture.png"><img loading="lazy" src="../../assets/images/mlops-crash-course/tong-quan-he-thong/mlops-platform/architecture.png"/></a></p>
<p>Các tương tác chính trong MLOps platform:</p>
<p>1. Data Pipeline kéo và xử lý dữ liệu từ file source</p>
<p>2. Dữ liệu sau khi xử lý bởi Data Pipeline sẽ được đẩy vào Feature Store</p>
<p>3. Data Scientist (DS) kéo feature từ Feature Store để thực hiện các thí nghiệm trên notebook</p>
<p>4. Training Pipeline kéo feature về để train model</p>
<p>5. Metadata của các experiment, ví dụ như hyperparameters và metrics, ... được lưu vào Metadata Store</p>
<p>6. Metadata của Training Pipeline cũng được lưu vào Metadata Store</p>
<p>7. Model sau khi train sẽ được lưu trữ ở Model Registry</p>
<p>8. Batch Serving Pipeline và Online Serving API kéo model từ Model Registry về để serve</p>
<p>9. Logs và metrics được scrape từ Online Serving API</p>
<p>10. 11. 12. 13. DS push code lên Github kích hoạt triển khai tự động (CI/CD) cho các pipelines và Online Serving API</p>
<p>14. Ngoài data source ở dạng tĩnh (static data), streaming data từ <em>Kafka</em> sẽ ghi liên tục vào Feature Store để cập nhật feature</p>
<p>Các tương tác và các công cụ được nhắc đến ở trên sẽ được hướng dẫn cụ thể xuyên suốt cả khoá học.</p>
<h2 id="su-dung-platform">Sử dụng platform</h2>
<h3 id="start">Start</h3>
<p>Để start các services trong MLOps platform, bạn làm theo các bước sau.</p>
<ol>
<li>Clone code mlops-crash-course-platform tại <a href="https://github.com/MLOpsVN/mlops-crash-course-platform">đây</a></li>
<li>Cài Docker theo hướng dẫn tại <a href="https://www.docker.com/">đây</a></li>
<li>
<p>Cài <strong>Docker Compose version v2.10.2</strong> theo hướng dẫn tại <a href="https://www.digitalocean.com/community/tutorials/how-to-install-docker-compose-on-ubuntu-18-04">đây</a></p>
<details class="warning" open="open">
<summary>Warning</summary>
<p>Series bài giảng này sử dụng <strong>docker-compose v2.10.2</strong> với command <code>docker-compose</code> (thay vì compose plugin của Docker với command <code>docker compose</code>). Sử dụng version khác <strong>v2.10.2</strong> có thể gây ra nhiều lỗi không mong muốn.</p>
</details>
</li>
<li>
<p>Start services</p>
<ol>
<li>
<p>Cách 1: Start tất cả services một lúc (<strong>nếu máy bạn có cấu hình mạnh</strong>):</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="nb">cd</span> mlops-crash-course-platform
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>bash run.sh all up
</code></pre></div>
<details class="info" open="open">
<summary>Info</summary>
<p>Mỗi bài học tiếp theo sẽ hướng dẫn cách start các service liên quan đến bài học đó. Do vậy, bạn không cần phải start tất cả các services cùng một lúc.</p>
</details>
</li>
<li>
<p>Cách 2: Start từng nhóm service một:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="nb">cd</span> mlops-crash-course-platform
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>bash run.sh feast up <span class="c1"># (1)</span>
</code></pre></div>
<ol>
<li>Start các service liên quan đến feast</li>
</ol>
</li>
</ol>
<details class="bug">
<summary>Bug</summary>
<p>Khi start các service, nếu bạn gặp lỗi <code>port is already allocated</code> tương tự như sau:</p>
<p><div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>Error response from daemon: driver failed programming external connectivity on endpoint mlflow-mlflow-1 <span class="o">(</span>2383a7be19ea5d2449033194211cabbd7ad13902d8d4c2dd215a63ab78038283<span class="o">)</span>: Bind <span class="k">for</span> <span class="m">0</span>.0.0.0:5000 failed: port is already allocated
</code></pre></div>
có nghĩa là đang có một service khác chạy ở port <code>5000</code> và <code>mlflow</code> không thể sử dụng port đó nữa, khi đó bạn sẽ thay bằng port khác như bên dưới đây. Bạn sẽ xử lý tương tự với các service khác.</p>
<div class="highlight"><table class="highlighttable"><tr><th class="filename" colspan="2"><span class="filename">mlops-crash-course-platform/mlflow/mlflow-docker-compose.yml</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span>
<span class="normal"><a href="#__codelineno-3-6">6</a></span>
<span class="normal"><a href="#__codelineno-3-7">7</a></span>
<span class="normal"><a href="#__codelineno-3-8">8</a></span>
<span class="normal"><a href="#__codelineno-3-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c1"># Source: https://hub.docker.com/r/atcommons/mlflow-server</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="n">version</span><span class="p">:</span> <span class="s1">'3'</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="n">services</span><span class="p">:</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="n">mlflow</span><span class="p">:</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a>    <span class="o">...</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a>    <span class="n">ports</span><span class="p">:</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a>    <span class="o">-</span> <span class="s2">"5000:5000"</span> <span class="c1"># (1)</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Thay bằng <code>"another_port:5000"</code>, ví dụ" <code>"5001:5000"</code>. Khi đó, sau khi start service <code>mlflow</code> bạn sẽ truy cập service này tại <code>http://localhost:5001</code>.</li>
</ol>
</details>
</li>
</ol>
<h3 id="stop">Stop</h3>
<p>Để stop các services trong MLOps platform, bạn làm theo các cách sau.</p>
<ol>
<li>
<p>Cách 1: Stop tất cả service mà không làm mất docker volumes liên quan</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="nb">cd</span> mlops-crash-course-platform
<a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>bash run.sh all down
</code></pre></div>
</li>
<li>
<p>Cách 2: Stop một nhóm service mà không làm mất docker volumes liên quan</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="nb">cd</span> mlops-crash-course-platform
<a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>bash run.sh feast down
</code></pre></div>
</li>
<li>
<p>Cách 3: Stop service và docker volumes liên quan tới service</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="nb">cd</span> mlops-crash-course-platform
<a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>bash run.sh feast down --volumes <span class="c1"># (1)</span>
<a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>bash run.sh all down --volumes <span class="c1"># (2)</span>
</code></pre></div>
<ol>
<li>Stop service <code>feast</code> và docker volumes liên quan tới service này</li>
<li>Stop tất cả services và docker volumes liên quan</li>
</ol>
</li>
</ol>
<details class="warning" open="open">
<summary>Warning</summary>
<p>Sử dụng cách 3 sẽ không xoá data nằm trong các local folders mà được mount với các docker containers của các services. Để xoá hoàn toàn data liên quan tới services, bạn cần xoá các local folders này thủ công. Các bạn làm các bước sau:</p>
<ol>
<li>Trong repo <code>mlops-crash-course-platform</code>, mở folder tương ứng với service bạn muốn xoá data, ví dụ folder <code>airflow</code></li>
<li>Xoá toàn bộ folders/files trong folder <code>airflow/run_env</code>, trừ file <code>.gitkeep</code></li>
</ol>
</details>
<h3 id="restart">Restart</h3>
<p>Để restart các services trong MLOps platform, bạn làm như dưới đây.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="nb">cd</span> mlops-crash-course-platform
<a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a>bash run.sh feast restart <span class="c1"># (1)</span>
<a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a>bash run.sh all restart <span class="c1"># (2)</span>
</code></pre></div>
<ol>
<li>Restart service <code>feast</code></li>
<li>Restart tất cả services</li>
</ol>
<h2 id="cau-truc-code">Cấu trúc code</h2>
<p>Để tiện cho việc code đồng thời quản lý các service trong MLOps platform thì bạn đặt repo <code>mlops-crash-course-platform</code> và <code>mlops-crash-course-code</code> trong cùng 1 folder như sau:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">mlops</span><span class="o">-</span><span class="n">crash</span><span class="o">-</span><span class="n">course</span>
<a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="err">├──</span> <span class="n">mlops</span><span class="o">-</span><span class="n">crash</span><span class="o">-</span><span class="n">course</span><span class="o">-</span><span class="n">platform</span><span class="o">/</span>
<a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="err">└──</span> <span class="n">mlops</span><span class="o">-</span><span class="n">crash</span><span class="o">-</span><span class="n">course</span><span class="o">-</span><span class="n">code</span><span class="o">/</span>
</code></pre></div>
<p>Trong đó:</p>
<ul>
<li>Repo <code>mlops-crash-course-platform</code>: chứa docker-compose files để triển khai MLOps platform</li>
<li>Repo <code>mlops-crash-course-code</code>: chứa code của dự án ML mà chúng ta sẽ phát triển và sử dụng MLOps platform</li>
</ul>
<details class="warning" open="open">
<summary>Warning</summary>
<p>Trong mỗi module ở <code>mlops-crash-course-code/</code> ví dụ như: <code>data_pipeline</code> và <code>model_serving</code> sẽ đều có 1 file là <code>dev_requirements.txt</code>. Bạn hãy tạo một môi trường mới tương tự như bên dưới trước khi cài đặt các thư viện để tránh xung đột thư viện với các dự án khác:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a>conda create -n myenv <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.9
<a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a>conda activate myenv
<a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="nb">cd</span> data_pipeline
<a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a>pip install -r dev_requirements.txt
</code></pre></div>
</details>
<h2 id="infra-layer">Infra layer</h2>
<p><a class="glightbox" href="../../assets/images/mlops-crash-course/tong-quan-he-thong/mlops-platform/enterprise-architecture.png"><img loading="lazy" src="../../assets/images/mlops-crash-course/tong-quan-he-thong/mlops-platform/enterprise-architecture.png"/></a></p>
<p>Phần này cung cấp cho bạn một cái nhìn tổng quan hơn nữa về MLOps platform khi được đặt trong cơ sở hạ tầng IT của một tổ chức.</p>
<p>Thông thường, một tổ chức sẽ có một nhóm các kỹ sư hạ tầng (Infra engineer) làm nhiệm vụ xây dựng Infra layer. Chức năng chính của Infra layer là quản lý, cung cấp tài nguyên tính toán, lưu trữ cho các ứng dụng ở các layer trên nó. Infra layer có thể được xây dựng đơn giản sử dụng docker-compose, Docker Swarm hoặc phức tạp hơn như Kubernetes. Trong khoá học này, giả sử rằng chúng ta sử dụng docker-compose ở Infra layer để quản lý các containers và cung cấp tài nguyên tính toán, lưu trữ cho các service.</p>
<p>Trên Infra layer là Application layer hay chính là nơi mà các engineer khác xây dựng các ứng dụng cho chính tổ chức đó. Các ứng dụng này có thể là môi trường Jupyter notebook, Gitlab server, Jenkins server, monitoring platform, v.v. MLOps platform mà chúng ta đang xây dựng cũng nằm trên Application layer này.</p>
<h2 id="tong-ket">Tổng kết</h2>
<p>Sau khi đã trả lời một loạt các câu hỏi về hệ thống ML ở bài trước và định nghĩa MLOps platform ở bài này, chúng ta đã có một cái nhìn kĩ lưỡng hơn về hệ thống cần được phát triển. Trong bài tiếp theo, bạn sẽ được tìm hiểu về các công việc và cách hoạt động cũng như triển khai một dự án POC.</p>
<h2 id="tai-lieu-tham-khao">Tài liệu tham khảo</h2>
<ul>
<li><a href="https://ml-ops.org/content/end-to-end-ml-workflow">https://ml-ops.org/content/end-to-end-ml-workflow</a></li>
<li><a href="https://valohai.com/mlops-platforms-compared/">https://valohai.com/mlops-platforms-compared/</a></li>
<li><a href="https://cloud.google.com/architecture/mlops-continuous-delivery-and-automation-pipelines-in-machine-learning">https://cloud.google.com/architecture/mlops-continuous-delivery-and-automation-pipelines-in-machine-learning</a></li>
</ul>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Phân tích vấn đề" class="md-footer__link md-footer__link--prev" href="phan-tich-van-de.html" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Phân tích vấn đề
            </div>
</div>
</a>
<a aria-label="Next: POC" class="md-footer__link md-footer__link--next" href="../poc/xay-dung-poc.html" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              POC
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright 2022 MLOpsVN Community. All Rights Reserved. Licensed under the Creative Commons Attribution 4.0 International Public License
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/mlopsvn/courses.mlops.vn" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "width": "100%", "height": "auto", "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom"});})</script></body>
</html>